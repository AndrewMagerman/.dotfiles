#!/bin/bash
set -euxo pipefail

# Skip if Neovim is already installed
if command -v nvim >/dev/null 2>&1; then
  echo "✔️ Neovim already installed: $(nvim --version | head -n 1)"
  exit 0
fi

echo "📦 Adding Debian unstable repo to get latest Neovim..."
echo "deb http://deb.debian.org/debian sid main" | sudo tee /etc/apt/sources.list.d/unstable.list
echo 'APT::Default-Release "bookworm";' | sudo tee /etc/apt/apt.conf.d/99defaultrelease

echo "🔄 Updating package list..."
sudo apt-get update

echo "🚀 Installing Neovim from sid..."
sudo apt-get install -y -t sid neovim

echo "✅ Neovim installed: $(nvim --version | head -n 1)"

